
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Compute Environments &#8212; HyTEST Project</title>
    
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">
<link href="../_static/styles/pydata-sphinx-theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">

    
  <link rel="stylesheet"
    href="../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" href="../_static/styles/sphinx-book-theme.css?digest=5115cc725059bd94278eecd172e13a965bf8f5a9" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../_static/design-style.b7bb847fb20b106c3d81b95245e65545.min.css" />
    
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf">

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?digest=9c920249402e914e316237a7dbc6769907cce411"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="../_static/sphinx-thebe.js"></script>
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Quick-Start for Nebari Cloud Environment" href="QuickStart-Cloud-Nebari.html" />
    <link rel="prev" title="HyTEST" href="../README.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="60">
<!-- Checkboxes to toggle the left sidebar -->
<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation" aria-label="Toggle navigation sidebar">
<label class="overlay overlay-navbar" for="__navigation">
    <div class="visually-hidden">Toggle navigation sidebar</div>
</label>
<!-- Checkboxes to toggle the in-page toc -->
<input type="checkbox" class="sidebar-toggle" name="__page-toc" id="__page-toc" aria-label="Toggle in-page Table of Contents">
<label class="overlay overlay-pagetoc" for="__page-toc">
    <div class="visually-hidden">Toggle in-page Table of Contents</div>
</label>
<!-- Headers at the top -->
<div class="announcement header-item noprint"></div>
<div class="header header-item noprint"></div>

    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<!-- Sidebar -->
<div class="bd-sidebar noprint" id="site-navigation">
    <div class="bd-sidebar__content">
        <div class="bd-sidebar__top"><div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="../index.html">
      
      
      
      <h1 class="site-logo" id="site-title">HyTEST Project</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../README.html">
                    HyTEST
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Environment Set-Up
 </span>
</p>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1 current active has-children">
  <a class="current reference internal" href="#">
   Compute Environments
  </a>
  <input checked="" class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/>
  <label for="toctree-checkbox-1">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="QuickStart-Cloud-Nebari.html">
     Quick-Start for Nebari Cloud Environment
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="QuickStart-Cloud-pangeoCHS.html">
     Quick-Start for pangeo.chs.usgs.gov Cloud Environment
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="OpenOnDemand.html">
     HPC Server: Open OnDemand
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="clusters.html">
   Starting a Dask Cluster
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/>
  <label for="toctree-checkbox-2">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="Help_AWS_Credentials.html">
     AWS Credentials
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="Start_Dask_Cluster_Nebari.html">
     Dask cluster on nebari.esipfed.org
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="Start_Dask_Cluster_Denali.html">
     Dask Cluster on Denali HPC
    </a>
   </li>
  </ul>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Model Evaluation Tutorials
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../model_evaluation/metrics.html">
   Evaluation Metrics
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/>
  <label for="toctree-checkbox-3">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../model_evaluation/Metrics_DScore_Suite_v1.html">
     D-Score Suite (v1) Benchmark
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../model_evaluation/tutorials/stats/Usage_DScore_Suite_v1.html">
     D-Score Suite (v1) Benchmark – Example Usage
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../model_evaluation/Metrics_StdSuite_v1.html">
     Standard Suite (v1) Metrics
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../model_evaluation/tutorials/stats/Usage_StdSuite_v1.html">
     Standard Suite (v1) Metrics – Usage Examples
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../model_evaluation/tutorials/nwm_streamflow/00_Overview.html">
   Streamflow Model Evaluation
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/>
  <label for="toctree-checkbox-4">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../model_evaluation/tutorials/nwm_streamflow/01_Data_Prep.html">
     Streamflow Eval :: Data Preparation
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../model_evaluation/tutorials/nwm_streamflow/02_Analysis_StdSuite.html">
     Streamflow Eval :: StdSuite Analysis
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../model_evaluation/tutorials/nwm_streamflow/02_Analysis_DScore.html">
     Essential Benchmark Components
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../model_evaluation/tutorials/nwm_streamflow/03_Vizualization.html">
     Streamflow Eval :: Visualization
    </a>
   </li>
  </ul>
 </li>
</ul>

    </div>
</nav></div>
        <div class="bd-sidebar__bottom">
             <!-- To handle the deprecated key -->
            
            <div class="navbar_extra_footer">
            Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
            </div>
            
        </div>
    </div>
    <div id="rtd-footer-container"></div>
</div>


          


          
<!-- A tiny helper pixel to detect if we've scrolled -->
<div class="sbt-scroll-pixel-helper"></div>
<!-- Main content -->
<div class="col py-0 content-container">
    
    <div class="header-article row sticky-top noprint">
        



<div class="col py-1 d-flex header-article-main">
    <div class="header-article__left">
        
        <label for="__navigation"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="right"
title="Toggle navigation"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-bars"></i>
  </span>

</label>

        
    </div>
    <div class="header-article__right">
<button onclick="toggleFullScreen()"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="bottom"
title="Fullscreen mode"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>

<div class="menu-dropdown menu-dropdown-download-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Download this page">
      <i class="fas fa-download"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="../_sources/environment_set_up/README.md"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Download source file"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="headerbtn__text-container">.md</span>
</a>

      </li>
      
      <li>
        
<button onclick="printPdf(this)"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="left"
title="Print to PDF"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="headerbtn__text-container">.pdf</span>
</button>

      </li>
      
    </ul>
  </div>
</div>
<label for="__page-toc"
  class="headerbtn headerbtn-page-toc"
  
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-list"></i>
  </span>

</label>

    </div>
</div>

<!-- Table of contents -->
<div class="col-md-3 bd-toc show noprint">
    <div class="tocsection onthispage pt-5 pb-3">
        <i class="fas fa-list"></i> Contents
    </div>
    <nav id="bd-toc-nav" aria-label="Page">
        <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#cloud-environment">
   Cloud Environment
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#hpc-environment">
   HPC Environment
  </a>
 </li>
</ul>

    </nav>
</div>
    </div>
    <div class="article row">
        <div class="col pl-md-3 pl-lg-5 content-container">
            <!-- Table of contents that is only displayed when printing the page -->
            <div id="jb-print-docs-body" class="onlyprint">
                <h1>Compute Environments</h1>
                <!-- Table of contents -->
                <div id="print-main-content">
                    <div id="jb-print-toc">
                        
                        <div>
                            <h2> Contents </h2>
                        </div>
                        <nav aria-label="Page">
                            <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#cloud-environment">
   Cloud Environment
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#hpc-environment">
   HPC Environment
  </a>
 </li>
</ul>

                        </nav>
                    </div>
                </div>
            </div>
            <main id="main-content" role="main">
                
              <div>
                
  <div class="tex2jax_ignore mathjax_ignore section" id="compute-environments">
<h1>Compute Environments<a class="headerlink" href="#compute-environments" title="Permalink to this headline">#</a></h1>
<p>The <code class="docutils literal notranslate"><span class="pre">environment_set_up</span></code> directory contains instructional materials and helper scripts to set
up your computational environment for running HyTEST workflows and scripts in this repository.</p>
<p>The scripts in this repository are designed to be portable between a cloud environment and
on-prem HPC resources. We prioritize work in the cloud because anyone can create an account
there to run these workflows, but given that a large number of our users work on the USGS HPC
systems, we have also build out some instructional materials to help set up these workflows
in those environments as well.</p>
<div class="section" id="cloud-environment">
<h2>Cloud Environment<a class="headerlink" href="#cloud-environment" title="Permalink to this headline">#</a></h2>
<p>If you are working in the cloud, we expect you to work in a JupyterHub instance that has
already been set up. If you are a USGS Water Mission Area (WMA) employee, you have a few
options for accessing a JupyterHub instance:</p>
<ol class="simple">
<li><p><a class="reference internal" href="QuickStart-Cloud-pangeoCHS.html"><span class="doc std std-doc">pangeo.chs.usgs.gov</span></a><br>
This JupyterHub instance is currently deployed on a USGS AWS account, and any USGS employee
can request access to this space. Once you are added, the url will take you to your own
personal JupyterHub space, and files in this space are only visible/accessible to the user
who created them. You will also have access to a shared set of kernels. The main disadvantage
to using this JupyterHub instance is that if you want to update the packages in the kernel
you are working in or create a new kernel, you will need to submit a ticket to CTek, and
the update may not happen for several weeks.</p></li>
<li><p><a class="reference internal" href="QuickStart-Cloud-Nebari.html"><span class="doc std std-doc">Nebari</span></a><br>
The HyTEST project is currently working on deploying an instance of Nebari JupyterHub, and
we will allow some of our priority users to access this space. This will be a shared
JupyterHub space, where all users can access and run any files in this deployment. Any
user can also quickly modify and update the kernels available in this deployment. We will
provide instructions for projects outside of HyTEST to deploy their own instance of a
shared Nebari space. This work is currently in development, and these instructions will
be updated once this is available.</p></li>
<li><p>Your own JupyterHub Instance<br>
Your can also work with your own deployment of a JupyterHub environment. You will need to
make sure you have a kernel with all of the required packages set up to run these notebooks.</p></li>
</ol>
</div>
<div class="section" id="hpc-environment">
<h2>HPC Environment<a class="headerlink" href="#hpc-environment" title="Permalink to this headline">#</a></h2>
<p>While we prefer that these notebooks be run on “<em>cloud</em>” infrastructure, we also provide some guidance for running them on USGS’s supercomputers. You will need to access an enviroment which emulates the Jupyter server – where the notebooks will reside and execute – using the HPC hardware. There are many ways to do this. Here are three options, in increasing order of complexity and flexibility:
While we prefer that these notebooks be run on “<em>cloud</em>” infrastructure, we also provide some guidance for running them on USGS’s supercomputers. You will need to access an enviroment which emulates the Jupyter server – where the notebooks will reside and execute – using the HPC hardware. There are many ways to do this. Here are three options, in increasing order of complexity and flexibility:</p>
<ol class="simple">
<li><p><a class="reference internal" href="OpenOnDemand.html"><span class="doc std std-doc">Open OnDemand</span></a><br>
This option provides the most effortless access to HPC hardware using a web interface. Only runs on the <a class="reference external" href="https://hpcportal.cr.usgs.gov/hpc-user-docs/supercomputers/tallgrass.html"><code class="docutils literal notranslate"><span class="pre">Tallgrass</span></code></a> supercomputer.</p></li>
<li><p><span class="xref myst">Jupyter Forward</span><br>
This option gives you more control over how to launch the server, and on which host (can be
run on <a class="reference external" href="https://hpcportal.cr.usgs.gov/hpc-user-docs/supercomputers/denali.html"><code class="docutils literal notranslate"><span class="pre">Denali</span></code></a>, <a class="reference external" href="https://hpcportal.cr.usgs.gov/hpc-user-docs/supercomputers/tallgrass.html"><code class="docutils literal notranslate"><span class="pre">Tallgrass</span></code></a>, or other hosts to which you have a login).  Requires that you
install the jupyter-forward software on your PC.</p></li>
<li><p><span class="xref myst">Custom Server Script</span><br>
This option lets you completely customize your HPC compute environment and invoke the Jupyter
server from a command shell on the HPC. Requires familiarity with the HPC command line, file
editing, etc.</p></li>
</ol>
<hr class="docutils" />
<p>Some of the notebooks in this repo make use of parallelism using Dask clusters.
The details of spinning up a cluster will differ, depending upon the environment.
We have a few sample ‘helper’ notebooks to illustrate the recommended way to
start clusters in these environments:</p>
<ul class="simple">
<li><p><a class="reference internal" href="Start_Dask_Cluster_Denali.html"><span class="doc std std-doc">Denali HPC</span></a></p></li>
<li><p><span class="xref myst">Tallgrass HPC</span></p></li>
<li><p><a class="reference internal" href="Start_Dask_Cluster_Nebari.html"><span class="doc std std-doc">Nebari</span></a></p></li>
<li><p><span class="xref myst">Pangeo.CHS.usgs.gov</span></p></li>
</ul>
</div>
<div class="toctree-wrapper compound">
</div>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./environment_set_up"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
            </main>
            <footer class="footer-article noprint">
                
    <!-- Previous / next buttons -->
<div class='prev-next-area'>
    <a class='left-prev' id="prev-link" href="../README.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title">HyTEST</p>
        </div>
    </a>
    <a class='right-next' id="next-link" href="QuickStart-Cloud-Nebari.html" title="next page">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Quick-Start for Nebari Cloud Environment</p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
            </footer>
        </div>
    </div>
    <div class="footer-content row">
        <footer class="col footer"><p>
  
    By The Jupyter Book community<br/>
  
      &copy; Copyright 2023.<br/>
</p>
        </footer>
    </div>
    
</div>


      </div>
    </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf"></script>


  </body>
</html>